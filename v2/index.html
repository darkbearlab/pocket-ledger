<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>é›²ç«¯è¨˜å¸³æœ¬ v2</title>
    <style>
        :root {
            --primary: #007AFF;
            --bg: #F2F2F7;
            --card-bg: #FFFFFF;
            --text-main: #000000;
            --text-sub: #8E8E93;
            --income: #34C759;
            --expense: #FF3B30;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- ç™»å…¥ç•«é¢ --- */
        #login-area {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100%; padding: 20px; background: var(--bg);
            z-index: 1000; position: absolute; width: 100%; top: 0; left: 0;
        }
        .login-card {
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 80%; max-width: 300px; text-align: center;
        }

        /* --- ä¸»æ‡‰ç”¨å®¹å™¨ --- */
        #app-container { display: none; flex-direction: column; height: 100%; }

        header {
            background: var(--card-bg); padding: 15px 20px; padding-top: env(safe-area-inset-top, 20px);
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 1px 0 rgba(0,0,0,0.05); z-index: 10;
        }
        h1 { margin: 0; font-size: 18px; font-weight: 600; }
        .logout-btn { background: none; border: none; color: var(--primary); font-size: 14px; cursor: pointer; }

        #scroll-area { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; }

        .balance-card {
            background: var(--card-bg); border-radius: 16px; padding: 25px; text-align: center;
            margin-bottom: 25px; box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }
        .balance-amount { font-size: 40px; font-weight: 700; margin-top: 5px;}

        .filter-section { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        input[type="month"] { border: none; background: transparent; font-size: 16px; color: var(--primary); font-weight: 600; }

        /* --- åˆ—è¡¨æ¨£å¼ (æœ‰é‡å¤§èª¿æ•´) --- */
        .txn-list { list-style: none; padding: 0; margin: 0; }
        .txn-item {
            background: var(--card-bg);
            padding: 15px; margin-bottom: 12px; border-radius: 12px;
            display: flex; align-items: center; /* å‚ç›´ç½®ä¸­ */
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
            cursor: pointer; /* è®“å®ƒçœ‹èµ·ä¾†å¯ä»¥é» */
            transition: background 0.2s;
        }
        .txn-item:active { background: #f0f0f0; } /* é»æ“Šå›é¥‹ */

        /* æ–°å¢ä¸€å€‹åŒ…è£¹å™¨ï¼Œæ’é–‹ç©ºé–“ */
        .txn-content-wrapper {
            flex: 1; /* ä½”æ»¿å‰©é¤˜ç©ºé–“ï¼ŒæŠŠåˆªé™¤æŒ‰éˆ•æ“ åˆ°å³é‚Š */
            display: flex; justify-content: space-between; align-items: center;
            margin-right: 15px; /* è·Ÿåˆªé™¤æŒ‰éˆ•ä¿æŒè·é›¢ */
        }

        .txn-info strong { display: block; font-size: 16px; margin-bottom: 4px; }
        .txn-info span { font-size: 12px; color: var(--text-sub); }
        .txn-amount { font-size: 18px; font-weight: 600; white-space: nowrap; }
        .income { color: var(--income); }
        .expense { color: var(--text-main); }
        
        /* åˆªé™¤æŒ‰éˆ•æ¨£å¼èª¿æ•´ */
        .delete-btn {
            background: #ff3b301a; color: #ff3b30; border: none;
            width: 28px; height: 28px; border-radius: 14px; /* ç¨å¾®å¤§ä¸€é»é» */
            font-size: 14px; cursor: pointer;
            display: flex; justify-content: center; align-items: center;
            padding: 0; /* ç¢ºä¿ç¬¦è™Ÿç½®ä¸­ */
        }

        /* --- æ‡¸æµ®æŒ‰éˆ• (FAB) ä¿®æ­£ç½®ä¸­ --- */
        .fab {
            position: fixed; bottom: 30px; right: 30px;
            width: 56px; height: 56px; border-radius: 50%;
            background-color: var(--primary); color: white; border: none;
            font-size: 32px; /* å­—é«”èª¿å¤§ä¸€é» */
            box-shadow: 0 4px 15px rgba(0,122,255,0.4); cursor: pointer; z-index: 50;
            /* é—œéµç½®ä¸­èªæ³• */
            display: flex; justify-content: center; align-items: center;
            padding: 0; line-height: 1; 
            padding-bottom: 4px; /* å¾®èª¿ï¼šå› ç‚º + è™Ÿå­—é«”ç‰¹æ€§é€šå¸¸åä¸Šï¼Œç¨å¾®å¾€ä¸‹å£“ä¸€é»è¦–è¦ºæ‰å¹³è¡¡ */
        }

        /* --- Modal å½ˆçª— --- */
        #modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); z-index: 200;
            align-items: flex-end;
        }
        .modal-card {
            background: var(--card-bg); width: 100%; border-radius: 20px 20px 0 0;
            padding: 25px; box-sizing: border-box; animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .form-row { margin-bottom: 15px; }
        input, select {
            width: 100%; padding: 12px; border-radius: 10px;
            border: 1px solid #eee; background: #f9f9f9;
            font-size: 16px; box-sizing: border-box; outline: none;
        }
        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        .btn { flex: 1; padding: 14px; border-radius: 10px; border: none; font-size: 16px; font-weight: 600; }
        .btn-save { background: var(--primary); color: white; }
        .btn-cancel { background: #eee; color: #333; }

    </style>
</head>
<body>

    <div id="login-area">
        <div class="login-card">
            <h2>â˜ï¸ é›²ç«¯è¨˜å¸³ v2</h2>
            <p style="color:#888; margin-bottom:30px">è«‹ç™»å…¥ä»¥é–‹å§‹ä½¿ç”¨</p>
            <button id="btn-login" class="btn btn-save" style="width:100%">Google ç™»å…¥</button>
        </div>
    </div>

    <div id="app-container">
        <header>
            <h1 id="header-title">My Ledger</h1>
            <button id="btn-logout" class="logout-btn">ç™»å‡º</button>
        </header>

        <div id="scroll-area">
            <div class="balance-card">
                <div style="font-size:14px; color:#888; margin-bottom:5px;">æœ¬æœˆçµé¤˜</div>
                <div class="balance-amount" id="total-balance">$0</div>
            </div>
            <div class="filter-section">
                <h3>è¿‘æœŸç´€éŒ„</h3>
                <input type="month" id="filter-month">
            </div>
            <ul class="txn-list" id="txn-list">
                <li style="text-align:center; color:#ccc; margin-top:20px;">è¼‰å…¥ä¸­...</li>
            </ul>
        </div>

        <button class="fab" id="btn-open-modal">+</button>
    </div>

    <div id="modal-overlay">
        <div class="modal-card">
            <h2 id="modal-title" style="margin:0 0 20px 0;">è¨˜ä¸€ç­†</h2>
            <div class="form-row">
                <select id="inp-type">
                    <option value="expense">ğŸ’¸ æ”¯å‡º</option>
                    <option value="income">ğŸ’° æ”¶å…¥</option>
                </select>
            </div>
            <div class="form-row"><input type="date" id="inp-date"></div>
            <div class="form-row"><input type="text" id="inp-title" placeholder="é …ç›®åç¨±"></div>
            <div class="form-row"><input type="number" id="inp-amount" placeholder="é‡‘é¡"></div>
            <div class="btn-group">
                <button class="btn btn-cancel" id="btn-close-modal">å–æ¶ˆ</button>
                <button class="btn btn-save" id="btn-save-txn">å„²å­˜</button>
            </div>
        </div>
    </div>

    <script type="module" src="./app.js"></script>
</body>
</html>
